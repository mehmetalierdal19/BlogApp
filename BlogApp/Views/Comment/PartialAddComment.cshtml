<div class="comment-top">
    <h4>Leave a Comment</h4>
    <div class="comment-bottom">
        <form id="newCommentForm" method="post">
            <input class="form-control" type="text" name="UserName" placeholder="Name" required="">
            <input class="form-control" type="email" name="" placeholder="Email" required="">

            <input class="form-control" type="text" name="Title" placeholder="Subject" required="">

            <textarea class="form-control" name="Content" placeholder="Message..." required=""></textarea>
            <button type="submit" class="btn btn-primary submit">Submit</button>
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    $(document).ready(function () {
        $('#newCommentForm').on('submit', function (e) {
            e.preventDefault();
            var formData = {
                UserName: $('input[name="UserName"]').val(),
                Title: $('input[name="Title"]').val(),
                Content: $('textarea[name="Content"]').val(),
                BlogID: @ViewBag.i
            };
            $.ajax({
                type: 'POST',
                url: '/Comment/PartialAddComment',
                data: formData,
                success: function (response) {
                    if (response.success) {
                        Swal.fire("Good job!", response.message, "success").then((result) =>{
                            if (result.isConfirmed) {
                                location.reload(); // Reloads the current page
                            }
                        });
                        $('#newCommentForm')[0].reset();
                    } else {
                        Swal.fire("Oops...", "Something went wrong!", "error");
                    }
                },
                error: function () {
                    Swal.fire("Oops...", "Server error occurred!", "error");
                }
            });
        });
    });
</script>